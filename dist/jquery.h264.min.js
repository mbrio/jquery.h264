/**
 * jQuery h.264 library 1.0.7
 * http://github.com/mbrio/jquery.h264
 *
 * Copyright (c) 2010 Michael Diolosa - http://github.com/mbrio
 * Dual-licensed under the GPL and MIT licenses.
 *
 * Date: Wed Sep 8 15:29:02 2010 -0400
 */
(function(f){(function(){function b(a,c){if(c)for(var g in c)if(c.hasOwnProperty(g))a[g]=c[g];return a}function d(a,c){var g=[];for(var h in a)if(a.hasOwnProperty(h))g[h]=c(a[h]);return g}function e(a,c,g){if(j.isSupported(c.version))a.innerHTML=j.getHTML(c,g);else if(c.expressInstall&&j.isSupported([6,65]))a.innerHTML=j.getHTML(b(c,{src:c.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else{if(!a.innerHTML.replace(/\s/g,"")){a.innerHTML="<h2>Flash version "+
c.version+" or greater is required</h2><h3>"+(k[0]>0?"Your version is "+k:"You have no flash plugin installed")+"</h3>"+(a.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+o+"'>here</a></p>");if(a.tagName=="A")a.onclick=function(){location.href=o}}if(c.onFail){var h=c.onFail.call(this);if(typeof h=="string")a.innerHTML=h}}if(i)window[c.id]=document.getElementById(c.id);b(this,{getRoot:function(){return a},getOptions:function(){return c},getConf:function(){return g},
getApi:function(){return a.firstChild}})}var i=document.all,o="http://www.adobe.com/go/getflashplayer",q=typeof jQuery=="function",r=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,m={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:true,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:false,cachebusting:false};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}});
window.flashembed=function(a,c,g){if(typeof a=="string")a=document.getElementById(a.replace("#",""));if(a){if(typeof c=="string")c={src:c};return new e(a,b(b({},m),c),g)}};var j=b(window.flashembed,{conf:m,getVersion:function(){var a,c;try{c=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(g){try{c=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"))&&a.GetVariable("$version")}catch(h){try{c=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"))&&a.GetVariable("$version")}catch(l){}}}return(c=
r.exec(c))?[c[1],c[3]]:[0,0]},asString:function(a){if(a===null||a===undefined)return null;var c=typeof a;if(c=="object"&&a.push)c="array";switch(c){case "string":a=a.replace(RegExp('(["\\\\])',"g"),"\\$1");a=a.replace(/^\s?(\d+\.?\d+)%/,"$1pct");return'"'+a+'"';case "array":return"["+d(a,function(h){return j.asString(h)}).join(",")+"]";case "function":return'"function()"';case "object":c=[];for(var g in a)a.hasOwnProperty(g)&&c.push('"'+g+'":'+j.asString(a[g]));return"{"+c.join(",")+"}"}return String(a).replace(/\s/g,
" ").replace(/\'/g,'"')},getHTML:function(a,c){a=b({},a);var g='<object width="'+a.width+'" height="'+a.height+'" id="'+a.id+'" name="'+a.id+'"';if(a.cachebusting)a.src+=(a.src.indexOf("?")!=-1?"&":"?")+Math.random();g+=a.w3c||!i?' data="'+a.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';g+=">";if(a.w3c||i)g+='<param name="movie" value="'+a.src+'" />';a.width=a.height=a.id=a.w3c=a.src=null;a.onFail=a.version=a.expressInstall=null;for(var h in a)if(a[h])g+=
'<param name="'+h+'" value="'+a[h]+'" />';h="";if(c){for(var l in c)if(c[l]){var n=c[l];h+=l+"="+(/function|object/.test(typeof n)?j.asString(n):n)+"&"}h=h.slice(0,-1);g+='<param name="flashvars" value=\''+h+"' />"}g+="</object>";return g},isSupported:function(a){return k[0]>a[0]||k[0]==a[0]&&k[1]>=a[1]}}),k=j.getVersion();if(q){jQuery.tools=jQuery.tools||{version:"1.2.4"};jQuery.tools.flashembed={conf:m};jQuery.fn.flashembed=function(a,c){return this.each(function(){f(this).data("flashembed",flashembed(this,
a,c))})}}})();REGEX_CUSTOM_CONTROL=/iphone|ipod|ipad|android/i;JQUERY_H264_VERSION="1.0.7";CSSCLASS_PLAYING="playing";window.VideoControls=vc=function(b){this.player=b;this.video=b.video;this.element=b.element;this.videoElement=b.videoElement;this.container=b.videoContainer;console.log(this.hasControls());VideoControls.supportsControls()&&this.hasControls()&&this.init()};vc.supportsControls=function(){return navigator.userAgent.search(REGEX_CUSTOM_CONTROL)===-1};vc.prototype.init=function(){this.video.attr("controls",
null);this.video.bind("timeupdate",f.proxy(s,this));this.video.bind("progress",f.proxy(t,this));this.video.bind("play",f.proxy(u,this));this.video.bind("pause",f.proxy(p,this));this.video.bind("ended",f.proxy(p,this));this.update()};vc.prototype.hasControls=function(){return false};vc.prototype.update=new Function;var u=function(){this.container.addClass(CSSCLASS_PLAYING);this.update()},p=function(){this.container.removeClass(CSSCLASS_PLAYING);this.update()},s=function(){this.percentComplete=this.videoElement.currentTime/
this.videoElement.duration;this.update()},t=function(){for(var b=this.videoElement.buffered,d=0,e=b.length,i=0;i<e;i++)d+=b.end(i)-b.start(i);this.percentLoaded=d/this.videoElement.duration;this.update()};f.videoControls={version:JQUERY_H264_VERSION};NAMES_VIDEO_ELEMENT="video";ELEMENTS_DIV="<div>";ELEMENTS_VIDEO="<video>";ELEMENTS_IMG="<img>";H264_TYPE='video/mp4; codecs="avc1.42E01E"';CSSCLASS_VIDEO="jquery-h264-video";CSSCLASS_VIDEO_CONTAINER="jquery-h264-video-container";CSSCLASS_POSTER="jquery-h264-video-poster";
CSSCALSS_POSTER_PLAY="jquery-h264-poster-play";CSS_ABSOLUTE="absolute";CSS_RELATIVE="relative";CSS_POINTER="pointer";UNDEFINED="undefined";NONE="none";CONTROLS="controls";HTML_SRC="src";DEFAULT_PARAMS={preload:NONE,controls:CONTROLS,width:640,height:480};DEFAULT_FLPARAMS=DEFAULT_CALLBACKS={};DEFAULT_NO_FLASH_VALUE={isHTML5:false};window.VideoPlayer=VideoPlayer=function(b,d,e){this.percentLoaded=this.percentComplete=0;this.callbacks_=e;this.element=b;v.call(this,d)};VideoPlayer.supportsH264Video=function(){var b=
document.createElement(NAMES_VIDEO_ELEMENT);return typeof b.canPlayType!==UNDEFINED&&!!b.canPlayType(H264_TYPE)};VideoPlayer.supportsPoster=function(){return navigator.userAgent.search(REGEX_CUSTOM_CONTROL)===-1};var v=function(b){this.videoContainer=f(ELEMENTS_DIV).css({width:b.width,height:b.height,position:CSS_RELATIVE}).addClass(CSSCLASS_VIDEO_CONTAINER);if(b.autoplay)b.preload="auto";var d=this.video=f(ELEMENTS_VIDEO,b).addClass(CSSCLASS_VIDEO);this.videoElement=this.video.get(0);if(VideoPlayer.supportsPoster()&&
b.poster&&!b.autoplay){d=f(ELEMENTS_DIV).css({width:b.width,height:b.height,position:CSS_ABSOLUTE,top:0,left:0}).addClass(CSSCALSS_POSTER_PLAY);var e=f(ELEMENTS_IMG,{width:b.width,height:b.height,src:b.poster}).css({position:CSS_ABSOLUTE,top:0,left:0});d=this.posterImage=f(ELEMENTS_DIV).css({width:b.width,height:b.height,cursor:CSS_POINTER,position:CSS_RELATIVE}).click(function(i){return function(){i.play()}}(this)).addClass(CSSCLASS_POSTER).append(e).append(d)}this.controls=new f.h264.controlsClass(this);
this.videoContainer.append(d);this.element.empty();this.element.append(this.videoContainer)};VideoPlayer.prototype.togglePlay=function(){this.videoElement.paused?this.play():this.pause()};VideoPlayer.prototype.seek=function(b){for(var d=this.videoElement.buffered,e=d.length,i=0;i<e;i++)if(b>=d.start(i)&&b<=d.end(i)){this.videoElement.currentTime=b;this.play();return true}return false};VideoPlayer.prototype.play=function(b){var d=function(e){return function(i){if(i){e.video.attr(HTML_SRC,i);e.videoElement.load()}e.videoElement.play()}}(this,
b);if(this.posterImage){this.posterImage.replaceWith(this.video);f.isFunction(this.callbacks_.posterClicked)&&this.callbacks_.posterClicked.call(this)}d(b);this.play=d};VideoPlayer.prototype.pause=function(){this.videoElement.pause()};f.h264={version:JQUERY_H264_VERSION,controlsClass:VideoControls};h264_=function(b,d,e){b=f.extend(DEFAULT_NO_FLASH_VALUE);failed=true;if(d){failed=false;b=d.flashvars;d.flashvars=null;d=f.extend({onFail:function(){failed=true}},d);b=this.flashembed(d,b)}f.isFunction(e.failed)&&
e.failed.call(this);f.isFunction(e.succeeded)&&e.succeeded.call(this);return{isHTML5:false,player:b}};if(VideoPlayer.supportsH264Video())h264_=function(b,d,e){b=new VideoPlayer(this,b,e);f.isFunction(e.succeeded)&&e.succeeded.call(this);return{isHTML5:true,player:b}};f.fn.h264=function(b,d,e){f.isPlainObject(b)||(b={src:b});f.isPlainObject(e)||(e={completed:e});b=f.extend(DEFAULT_PARAMS,b);d=d&&f.extend(DEFAULT_FLPARAMS,{width:b.width,height:b.height},d);e=f.extend(DEFAULT_CALLBACKS,e);b=h264_.call(this,
b,d,e);f.isFunction(e.completed)&&e.completed.call(this);return b}})(jQuery);
